<!DOCTYPE html>
<html>
<head>
    <title>Audio Player</title>
    <style>
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background-color: black;
        }

        .container {
            background-color: gray;
            padding: 20px;
        }

        input[type="text"], button {
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
    <script src="js/main.js" type="text/javascript"></script>
    <div class="container">
        <input type="text" id="wordInput" placeholder="Enter a word">
        <button id="playSoundButton">Play Sound</button>
        <button id="checkWordButton">Check Word</button>
        <button id="unmute">Unmute</button>

    </div>

    <script>
        var soundUrl = "https://files.wanikani.com/44xqgifydmnkic65v1zlb55e5sru";
        var audio;
        (function (){
            audio = new Audio(soundUrl);
        })()
        document.getElementById('playSoundButton').addEventListener('click', function() {
            
            audio.play().catch(function(error) {
                console.error('Error playing audio:', error);
            });
        });

        document.getElementById('checkWordButton').addEventListener('click', function() {
            var word = document.getElementById("wordInput").value;
            var knownWord = "example"; // Replace with the actual known word

            if (word === knownWord) {
                alert("The word is correct!");
            } else {
                alert("The word is incorrect.");
            }
        });

        document.getElementById('wordInput').addEventListener('keypress', function(event) {
            if (event.key === 'Enter') {
                document.getElementById('checkWordButton').click();
            }
        });

        (function () {

// Check if the browser supports web audio. Safari wants a prefix.
if ('AudioContext' in window || 'webkitAudioContext' in window) {

  //////////////////////////////////////////////////
  // Here's the part for just playing an audio file.
  //////////////////////////////////////////////////

  /*playButton.onclick = function () {
    return play(yodelBuffer);
  };*/

  // Play the file every 2 seconds. You won't hear it in iOS until the audio context is unlocked.
  /*.setInterval(function(){
    play(yodelBuffer);
  }, 5000);*/


  //////////////////////////////////////////////////
  // Here's the part for unlocking the audio context, probably for iOS only
  //////////////////////////////////////////////////

  // From https://paulbakaus.com/tutorials/html5/web-audio-on-ios/
  // "The only way to unmute the Web Audio context is to call noteOn() right after a user interaction. This can be a click or any of the touch events (AFAIK â€“ I only tested click and touchstart)."
  
  var unmute = document.getElementById('unmute');
  unmute.addEventListener('click', unlock);

  function unlock() {
    console.log("unlocking")
    // create empty buffer and play it
    var buffer = context.createBuffer(1, 1, 22050);
    var source = context.createBufferSource();
    source.buffer = buffer;
    source.connect(context.destination);

    // play the file. noteOn is the older version of start()
    source.start ? source.start(0) : source.noteOn(0);

    // by checking the play state after some time, we know if we're really unlocked
    setTimeout(function() {
      if((source.playbackState === source.PLAYING_STATE || source.playbackState === source.FINISHED_STATE)) {
        // Hide the unmute button if the context is unlocked.
        unmute.style.display = "none";
      }
    }, 0);
  }

  // Try to unlock, so the unmute is hidden when not necessary (in most browsers).
  unlock();
}
}
)();
    </script>
</body>
</html>